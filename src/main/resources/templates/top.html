<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description" content="" />
<meta name="author" content="" />
<title>MYQLO | トップ画面</title>
<link rel="icon" type="image/x-icon" href="../static/dist/assets/img/myqlo_favicon.jpg" th:href="@{/dist/assets/img/myqlo_favicon.jpg}" />
<!-- Font Awesome icons (free version)-->
<script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" crossorigin="anonymous"></script>
<!-- Google fonts-->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
<!-- Core theme CSS (includes Bootstrap)-->
<link href="../static/dist/css/list_styles.css" rel="stylesheet" th:href="@{/dist/css/list_styles.css}" />
<link href="../static/dist/css/styles.css" rel="stylesheet" th:href="@{/dist/css/styles.css}" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<style type="text/css">
.weather {
	background-image: url(../img/weather.jpg);
	background-color: rgba(255, 255, 255, 0.5);
	background-blend-mode: lighten;
	width: 20%;
	margin: 0 auto;
	max-width: 500px;
}
</style>
<script type="text/javascript">
	$(function() {
		var API_KEY = '478ea780a9d4d20c8ddf7539de30ee32';
		var city = "[[ ${city} ]]";
		//var city = "東京都";
		var url = 'http://api.openweathermap.org/data/2.5/forecast?q=' + city
				+ ',jp&units=metric&APPID=' + API_KEY;
		$.ajax({
			url : url,
			dataType : "json",
			type : 'GET',
		}).done(function(data) {
			var insertHTML = "";
			var cityName = '<h2>' + data.city.name + '</h2>';
			$('#city-name').html(cityName);
			for (var i = 0; i <= 0; i = i + 1) {
				insertHTML += buildHTML(data, i);
			}
			$('#weather').html(insertHTML);
		}).fail(function(data) {
			console.log("失敗しました");
		});
	});

	function buildHTML(data, i) {
		var Week = new Array("（日）", "（月）", "（火）", "（水）", "（木）", "（金）", "（土）");
		var date = new Date(data.list[i].dt_txt);
		date.setHours(date.getHours() + 9);
		var month = date.getMonth() + 1;
		var day = month + "月" + date.getDate() + "日" + Week[date.getDay()]
				+ date.getHours() + "：00";
		var icon = data.list[i].weather[0].icon;
		var html = '<div class="weather-report">'
				+ '<img src="http://openweathermap.org/img/w/' + icon + '.png">'
				+ '<div class="weather-date">' + day + '</div>'
				+ '<div class="weather-main">' + data.list[i].weather[0].main
				+ '</div>' + '<div class="weather-temp">'
				+ Math.round(data.list[i].main.temp) + '℃</div>' + '</div>';
		return html
	}
</script>
</head>
<body id="page-top">

	<!-- Navigation-->
	<div id="navArea">
		<nav class="navbar navbar-default" th:replace="header::pageheader"></nav>
	</div>
	<!-- アイテム一覧画面 -->
	<section class="page-section bg-light" id="portfolio">
		<div class="container">
			<div class="text-center">
				<h2 class="section-heading text-uppercase"><a style="color:black" href="top.html" th:href="@{/}">My Closet</a></h2>
				<h3 class="section-subheading text-muted">Here is a list of the
					clothes you have.</h3>
				<!-- 天気予報の表示 -->
				<div class="weather">
					<a th:href="@{/weather/showWeatherPage}"><div th:text="${city}+'の天気'"></div>
						<span id="weather"></span></a>
				</div>
			</div>
			<br>
			<!-- タブ切り替え （アイテムが一件も登録されていない場合はタブ非表示）-->
			<div style="text-align:center">
				<span th:if="${clothesList.size()==0}"  th:text="${'アイテムはありません'}"></span>
			<div class="item_select cp_sl04" th:unless="${clothesList.size()==0}">
				<select required>
					<option value="">アイテムを絞り込む</option>
					<option value="category">カテゴリで絞り込む</option>
					<option value="brand">ブランドで絞り込む</option>
					<option value="tag">タグで絞り込む</option>
				</select>
			</div>
			<form action="top.html" th:action="@{/search}" method="post"
				onchange="submit(this.form)">
				<div id="category" class="category">
					<input id="tab_all" type="radio" name="categoryId" class="radioButton" value="0"><label class="tab-label"for="tab_all">全て</label>
					<input id="tab_tops" type="radio" name="categoryId" value="2" class="radioButton"><label class="tab-label" for="tab_tops">トップス</label>
					<input id="tab_outer" type="radio" name="categoryId" value="3" class="radioButton"><label class="tab-label" for="tab_outer">アウター</label> 
					<input id="tab_bottoms" type="radio" name="categoryId" value="4" class="radioButton"><label class="tab-label" for="tab_bottoms">ボトムス</label> 
					<input id="tab_dress" type="radio" name="categoryId" value="7" class="radioButton"><label class="tab-label" for="tab_dress">ワンピース</label> 
					<input id="tab_shoes" type="radio" name="categoryId" value="5" class="radioButton"><label class="tab-label" for="tab_shoes">シューズ</label> 
					<input id="tab_bags" type="radio" name="categoryId" value="6" class="radioButton" /><label class="tab-label" for="tab_bags">バッグ</label>
					<input id="tab_accessories" type="radio" name="categoryId" value="1" class="radioButton" /><label class="tab-label" for="tab_accessories">ファッション雑貨</label>
				</div>
				<div>
					<span class="brand" id="brand" th:each="brand : ${brandMap}">
						<label> <input type="radio" class="radioButton"
							name="brandId" th:value="${brand.key}" th:text="${brand.value}">
					</label>
					</span>
				</div>
				<div>
					<span class="tag" id="tag" th:each="tag : ${tagMap}"> <label>
							<input type="radio" class="radioButton" name="tagContentsId"
							th:value="${tag.key}" th:text="${tag.value}">
					</label>
					</span>
				</div>
			</form>
			</div>
		<!-- アイテム一覧 -->
			<div id="cloth_list" class="row">
				<div id="items" class="col-lg-4 col-sm-6 mb-4" th:each="item : ${clothesList}">
					<div class="portfolio-item">
						<!-- <a class="portfolio-link" href="edit_cloth.html"
							th:href="@{'/showDetail/?id=' + ${item.id}}">
							<div class="portfolio-hover">
								<div class="portfolio-hover-content">
									<i class="fas fa-plus fa-3x"></i>
								</div>
							</div> 
							<img class="img-fluid" th:src="${item.imagePath}" /> -->
						<a class="portfolio-link" href="edit_cloth.html" th:href="@{'/showDetail/?id=' + ${item.id}}">
							  <div class="portfolio-hover">  
								  <div class="portfolio-hover-content"> 
									 <i class="fas fa-plus fa-3x"></i> 
								</div>  
							  </div>   
								 	<img class="img-fluid" th:src="${item.imagePath}" />
									<!-- <img class="img-fluid" th:src="${'/img/'+item.imagePath}" />  -->
						</a>
					</div>
				</div>
				<!-- もっと見るボタン -->

				<div id="more_btn" class="btn btn--vuemore btn-c">
					もっと見る <i class="fa fa-chevron-down" aria-hidden="true"></i>
				</div>
				<div id="close_btn" class="btn btn--vuemore btn-c">
					閉じる <i class="fa fa-chevron-up" aria-hidden="true"></i>
				</div>
			</div>
			<!-- アイテム新規登録ボタン -->
			<div class="register-item-btn">
				<a href="register_clothes.html"
					th:href="@{/registerClothes/showRegisterClothes}"
					class="btn-circle-stitch"> <i class="fas fa-tshirt"></i> <span>登録</span>
				</a>
			</div>
		</div>
	</section>

	<!-- Footer-->
	<footer class="footer py-4"  th:replace="footer::pagefooter">
	</footer>

	<!-- Bootstrap core JS-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
	<!-- Third party plugin JS-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
	<!-- Contact form JS-->
	<script src="../static/dist/assets/mail/jqBootstrapValidation.js" th:src="@{/dist/assets/mail/jqBootstrapValidation.js}"></script>
	<script src="../static/dist/assets/mail/contact_me.js" th:src="@{/dist/assets/mail/contact_me.js}"></script>
	<!-- Core theme JS-->
	<script src="../static/dist/js/show_item.js" th:src="@{/dist/js/show_item.js}"></script>
	<script src="../static/dist/js/scripts.js" th:src="@{/dist/js/scripts.js}"></script>
	<script src="../static/dist/js/hamburger_menu.js" th:src="@{/dist/js/hamburger_menu.js}"></script>
	<script src="../static/dist/js/vuemore.js" th:src="@{/dist/js/vuemore.js}"></script>
</body>
</html>
