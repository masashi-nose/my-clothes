<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description" content="" />
<meta name="author" content="" />
<title>MYQLO | MY STATS</title>
<link rel="icon" type="image/x-icon"
	href="../static/dist/assets/img/favicon.ico" />
<!-- Font Awesome icons (free version)-->
<script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js"
	crossorigin="anonymous"></script>
<!-- Google fonts-->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700"
	rel="stylesheet" type="text/css" />
<link
	href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic"
	rel="stylesheet" type="text/css" />
<link
	href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700"
	rel="stylesheet" type="text/css" />
<!-- Core theme CSS (includes Bootstrap)-->
<link href="../static/dist/css/styles.css" rel="stylesheet"
	th:href="@{/dist/css/styles.css}" />

<!-- Chart.js -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js "></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.js"></script>
<script src="https://unpkg.com/chartjs-plugin-colorschemes"></script>

<title>Insert title here</title>
</head>
<body>
	<!-- Navigation-->
	<div id="navArea">
		<nav>
			<div class="inner">
				<ul>
					<li><a href="top.html" th:href="@{/}"><i
							class="fas fa-home"></i>&emsp;&emsp;TOP</a></li>
					<li><a href="statistics.html" th:href="@{/stats}"><i
							class="far fa-chart-bar"></i>&emsp;&emsp;統計データ</a></li>
					<li><a href="calender.html" th:href="@{/}"><i
							class="far fa-calendar-alt"></i>&emsp;&emsp;カレンダー</a></li>
					<li><a href="coordinate.html" th:href="@{/coordinate}"><i
							class="fas fa-female"></i>&emsp;&emsp;コーディネート</a></li>
					<li><a href="contact.html" th:href="@{/}"><i
							class="far fa-envelope"></i>&emsp;&emsp;お問い合わせ</a></li>
					<li><a href="faq.html" th:href="@{/faq}"><i
							class="far fa-question-circle"></i>&emsp;&emsp;FAQ</a></li>
					<li><a href="login.html" th:href="@{/logout}"><i
							class="fas fa-sign-out-alt"></i>&emsp;&emsp;ログアウト</a></li>
				</ul>
			</div>
		</nav>
		<div class="humberger_menue">
			<div class="toggle_btn">
				<span></span> <span></span> <span></span>
			</div>
		</div>
		<div id="mask"></div>
	</div>
	<!-- Portfolio Grid-->
	<section class="page-section bg-light" id="portfolio">
		<div class="container">
			<div class="text-center">
				<h2 class="section-heading text-uppercase">MY STATS</h2>
				<div class="section-subheading text-muted">あなたが登録したアイテムの統計データです。</div>
			</div>
			<br> <br>

			<div class="text-center">
				<div th:if="${clothesListByUserId} == null">
					<br>
					<h5 th:text="${message}"></h5>
					<div>
						<a href="register_clothes.html"
							th:href="@{/registerClothes/showRegisterClothes}">アイテムを登録しよう！</a>
					</div>
				</div>

				<div th:if="${clothesListByUserId} != null">
					<input type="hidden" id="loginUserId" th:value="${loginUserId}">
					<table class="table">
						<thead>
							<tr>
								<th class="st-column">クローゼット総資産額</th>
								<th class="st-column">購入アイテム平均額</th>
								<th class="st-column">クローゼットアイテム数</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><span
									th:text="${#numbers.formatInteger(totalItemPrice, 1, 'COMMA') + '&nbsp;円'}"></span></td>
								<td><span
									th:text="${#numbers.formatInteger(itemPriceAverage, 1, 'COMMA') + '&nbsp;円'}"></span></td>
								<td><span
									th:text="${#numbers.formatInteger(totalItemCount, 1, 'COMMA') + '&nbsp;点'}"></span></td>

							</tr>
						</tbody>
					</table>

					<br> <br>

					<!-- カテゴリー別金額テーブル -->
					<table class="table">
						<thead>
							<tr>
								<th class="st-column">カテゴリー別金額</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>
									<canvas id="chartListedByCategoryPrice"></canvas>
								</td>
							</tr>
						</tbody>
					</table>

					<!-- カテゴリー別金額表示用js -->
					<script type="text/javascript" th:inline="javascript">
					$(function(){
						$('#chartListedByCategoryPrice').ready(function(){
							$.ajax({
								url: "http://localhost:8080/get_category_price_data",
								type: "GET",
								dataType: "json",
								data : {
									userId : $('#loginUserId').val()
								},
								async: true
									
								}).done(function(data){
									var categoryPrices = [];
													
									for(var categoryPrice of data.categoryPriceList){
										categoryPrices.push(categoryPrice);
									}
														
									const ctx = document.getElementById('chartListedByCategoryPrice');
									const doughnutChart = new Chart(ctx, {
										type: 'doughnut',
										data : {
											labels : [[ ${categoryLabel} ]],
											datasets : [{
												data : categoryPrices,
												}]
										},
											options : {
												title : {
													display : true,
													text : 'カテゴリー　割合'
													},
												plugins: {
										            colorschemes: {
										                scheme: 'brewer.Paired12'
												            }
												        }											
											       }
												});
								}).fail(function(XMLHttpRequest, textStatus, errorThrown){
									alert("エラーが発生しました。");
										console.log("XMLHttpRequest:" + XMLHttpRequest.status);
										console.log("textStatus:" + textStatus);
										console.log("errorThrown" + errorThrown.message);
								});
							});						
						});
					</script>
					<br>

					<!-- カテゴリー別アイテム数テーブル-->
					<table class="table">
						<thead>
							<tr>

								<th class="st-column">カテゴリー別アイテム数</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>
									<canvas id="chartListedByCategoryCount"></canvas>
								</td>
							</tr>
						</tbody>
					</table>

					<!-- カテゴリー別アイテム数表示用js -->
					<script type="text/javascript" th:inline="javascript">
					$(function(){
						$('#chartListedByCategoryCount').ready(function(){
							$.ajax({
								url: "http://localhost:8080/get_category_count_data",
								type: "GET",
								dataType: "json",
								data : {
									userId : $('#loginUserId').val()
								},
								async: true
									
								}).done(function(data){
									var categoryCounts = [];
													
									for(var categoryCount of data.categoryCountList){
										categoryCounts.push(categoryCount);
									}
														
									const ctx = document.getElementById('chartListedByCategoryCount');
									const doughnutChart = new Chart(ctx, {
										type: 'doughnut',
										data : {
											labels : [[ ${categoryLabel} ]],
											datasets : [{
												data : categoryCounts,
												}]
										},
											options : {
												title : {
													display : true,
													text : 'カテゴリー　割合'
													},
												plugins: {
										            colorschemes: {
										                scheme: 'brewer.Paired12'
												            }
												        }
											       }
												});
								}).fail(function(XMLHttpRequest, textStatus, errorThrown){
									alert("エラーが発生しました。");
										console.log("XMLHttpRequest:" + XMLHttpRequest.status);
										console.log("textStatus:" + textStatus);
										console.log("errorThrown" + errorThrown.message);
								});
							});						
						});
					</script>
					<br>

					<!-- ブランド別金額 -->
					<table class="table">
						<thead>
							<tr>
								<th class="st-column">ブランド別金額</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>
									<canvas id="chartListedByBrandPrice"></canvas>
								</td>
							</tr>
						</tbody>
					</table>

					<!-- ブランド別金額表示用js -->
					<script type="text/javascript" th:inline="javascript">
					$(function(){
						$('#chartListedByBrandPrice').ready(function(){
							$.ajax({
								url: "http://localhost:8080/get_brand_price_data",
								type: "GET",
								dataType: "json",
								data : {
									userId : $('#loginUserId').val()
								},
								async: true
									
								}).done(function(data){
									var brandPrices = [];
													
									for(var brandPrice of data.brandPriceList){
										brandPrices.push(brandPrice);
									}
														
									const ctx = document.getElementById('chartListedByBrandPrice');
									const doughnutChart = new Chart(ctx, {
										type: 'doughnut',
										data : {
											labels : [[ ${brandLabel} ]],
											datasets : [{
												data : brandPrices,
												}]
										},
											options : {
												title : {
													display : true,
													text : 'ブランド　割合'
													},
												plugins: {
										            colorschemes: {
										                scheme: 'brewer.Paired12'
												            }
												        }
											       }
												});
								}).fail(function(XMLHttpRequest, textStatus, errorThrown){
									alert("エラーが発生しました。");
										console.log("XMLHttpRequest:" + XMLHttpRequest.status);
										console.log("textStatus:" + textStatus);
										console.log("errorThrown" + errorThrown.message);
								});
							});						
						});
					</script>
					<br>

					<!-- ブランド別アイテム数 -->
					<table class="table">
						<thead>
							<tr>
								<th class="st-column">ブランド別アイテム数</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>
									<canvas id="chartListedByBrandCount"></canvas>
								</td>
							</tr>
						</tbody>
					</table>

					<!-- ブランド別アイテム数表示用js -->
					<script type="text/javascript" th:inline="javascript">
					$(function(){
						$('#chartListedByBrandCount').ready(function(){
							$.ajax({
								url: "http://localhost:8080/get_brand_count_data",
								type: "GET",
								dataType: "json",
								data : {
									userId : $('#loginUserId').val()
								},
								async: true
									
								}).done(function(data){
									var brandCounts = [];
													
									for(var brandCount of data.brandCountList){
										brandCounts.push(brandCount);
									}
														
									const ctx = document.getElementById('chartListedByBrandCount');
									const doughnutChart = new Chart(ctx, {
										type: 'doughnut',
										data : {
											labels : [[ ${brandLabel} ]],
											datasets : [{
												data : brandCounts,
												}]
										},
											options : {
												title : {
													display : true,
													text : 'ブランド　割合'
													},
												plugins: {
										            colorschemes: {
										                scheme: 'brewer.Paired12'
												            }
												        }
											       }
												});
								}).fail(function(XMLHttpRequest, textStatus, errorThrown){
									alert("エラーが発生しました。");
										console.log("XMLHttpRequest:" + XMLHttpRequest.status);
										console.log("textStatus:" + textStatus);
										console.log("errorThrown" + errorThrown.message);
								});
							});						
						});
					</script>

				</div>
			</div>

		</div>
	</section>

	<!-- Footer-->
	<footer class="footer py-4">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-4 text-lg-left">Copyright © MYQLO 2020</div>
				<div class="col-lg-4 my-3 my-lg-0">
					<a class="btn btn-dark btn-social mx-2" href="#!"><i
						class="fab fa-twitter"></i></a> <a
						class="btn btn-dark btn-social mx-2" href="#!"><i
						class="fab fa-facebook-f"></i></a> <a
						class="btn btn-dark btn-social mx-2" href="#!"><i
						class="fab fa-linkedin-in"></i></a>
				</div>
				<div class="col-lg-4 text-lg-right">
					<a class="mr-3" href="#!">Privacy Policy</a> <a href="#!">Terms
						of Use</a>
				</div>
			</div>
		</div>
	</footer>


	<!-- Bootstrap core JS-->
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
	<!-- Third party plugin JS-->
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
	<!-- Contact form JS-->
	<script src="../static/dist/assets/mail/jqBootstrapValidation.js"
		th:src="@{/dist/assets/mail/jqBootstrapValidation.js}"></script>
	<script src="../static/dist/assets/mail/contact_me.js"
		th:src="@{/dist/assets/mail/contact_me.js}"></script>
	<!-- Core theme JS-->
	<script src="../static/dist/js/scripts.js"
		th:src="@{/dist/js/scripts.js}"></script>
	<script src="../static/dist/js/hamburger_menu.js"
		th:src="@{/dist/js/hamburger_menu.js}"></script>




</body>
</html>